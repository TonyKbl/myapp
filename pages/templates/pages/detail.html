{% extends "base.html" %}

{% load thumbnail %}
{% load custom_page_filters %}

{% block title %}{{username}} - Profile{% endblock title %}

{% block content %}

    <!-- Card START -->
    <div class="card">
      <div class="h-200px rounded-top" style="background-image:url(https://clubs4fun.s3.amazonaws.com/static/{{ page.cover_image }}); background-position: center; background-size: cover; background-repeat: no-repeat;"></div>
        <!-- Card body START -->
        <div class="card-body py-0">
          <div class="d-sm-flex align-items-start text-center text-sm-start">
            <div>
              <!-- Avatar -->
              <div class="avatar avatar-xxl mt-n5 mb-3">
                {% thumbnail page.image "100x100" crop="center" as im %}
                    <img class="avatar-img rounded-circle border border-white border-3" src="{{ im.url }}" alt="">
                {% endthumbnail %}
              </div>
            </div>
            <div class="ms-sm-4 mt-sm-3">
              <!-- Info -->
              <h1 class="mb-0 h5">{{ page.page_name }} <i class="bi bi-patch-check-fill text-success small"></i></h1>
              <p>250 connections</p>
            </div>
            <!-- Button -->
            <div class="d-flex mt-3 justify-content-center ms-sm-auto">
                {% if page.user.username == request.user.username %}
                <a href="/edit_page/{{page.id}}/{{page.slug}}" >
                  <button class="btn btn-danger-soft me-2" type="button"> <i class="bi bi-pencil-fill pe-1"></i> Edit </button>
                </a>
                {% else %}
                {% if request.user.id|is_following_page:page.id %}
                    <form action="{% url 'pages:page_follow' page.slug %}" method="post">
                        {% csrf_token %}
                    <button class="btn btn-primary-soft me-2" type="submit"> <i class="bi bi-person-minus pe-1"></i> Unfollow </button>
                    </form>
                {% else %}
                    <form action="{% url 'pages:page_follow' page.slug %}" method="post">
                        {% csrf_token %}
                    <button class="btn btn-primary me-2" type="submit"> <i class="bi bi-person-plus pe-1"></i> Follow </button>
                    </form>
                {% endif %}
            {% endif %}
              <div class="dropdown">
                <!-- Card share action menu -->
                <button class="icon-md btn btn-light" type="button" id="profileAction2" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="bi bi-three-dots"></i>
                </button>
                <!-- Card share action dropdown menu -->
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileAction2">
                  <li><a class="dropdown-item" href="/new_page_post/{{page.id}}"> <i class="bi bi-bookmark fa-fw pe-2"></i>New Page Post</a></li>
                  <li><a class="dropdown-item" href="#"> <i class="bi bi-bookmark fa-fw pe-2"></i>Share page in a message</a></li>
                  <li><a class="dropdown-item" href="#"> <i class="bi bi-file-earmark-pdf fa-fw pe-2"></i>Save your profile to PDF</a></li>
                  <li><a class="dropdown-item" href="#"> <i class="bi bi-lock fa-fw pe-2"></i>Lock profile</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="#"> <i class="bi bi-gear fa-fw pe-2"></i>Profile settings</a></li>
                </ul>
              </div>
            </div>
          </div>
          <!-- List profile -->
          <ul class="list-inline mb-0 text-center text-sm-start mt-3 mt-sm-0">
            <li class="list-inline-item"><i class="bi bi-briefcase me-1"></i> {{ page.page_type }}</li>
            <li class="list-inline-item"><i class="bi bi-geo-alt me-1"></i> {{ page.town_city }}, {{page.county}}</li>
            <li class="list-inline-item"><i class="bi bi-calendar2-plus me-1"></i> Joined on {{ user.date_joined|date:"d M Y" }}</li>
          </ul>
        </div>
        <!-- Card body END -->
        <div class="card-footer mt-3 pt-2 pb-0">
          <!-- Nav profile pages -->
          <ul class="nav nav-bottom-line align-items-center justify-content-center justify-content-md-start mb-0 border-0">
            <li class="nav-item"> <a class="nav-link" href="my-profile.html"> Feed </a> </li>
            <li class="nav-item"> <a class="nav-link active" href="my-profile-about.html"> About </a> </li>
            <li class="nav-item"> <a class="nav-link" href="my-profile-media.html"> Gallery</a> </li>
            <li class="nav-item"> <a class="nav-link" href="my-profile-events.html"> Events</a> </li>
            <li class="nav-item"> <a class="nav-link" href="my-profile-activity.html"> Reviews</a> </li>
          </ul>
        </div>
      </div>
      <!-- Card END -->
      <!-- Card about item START -->
      <div class="card">
        <!-- Card header START -->
        <div class="card-header border-0 pb-0">
          <h5 class="card-title"> About</h5> 
        </div>
        <!-- Card header END -->
        <!-- Card body START -->
        <div class="card-body">
            {% comment %} <p><strong>{{ user.profile.intro|linebreaks}}</strong></p> {% endcomment %}
            <p>{{ page.description|linebreaks}}</p>
               <hr>
          <div class="row g-4 align-items-center">
            <div class="col-lg-6">
              <!-- Person 1 START -->
              <h6>Address</h6>
                {{ page.address1 }}<br>
                {% if page.address2 != None %}{{ page.address2 }}<br>{%endif%}
                {{page.county}}<br>
                {{page.town_city}}<br>
                <br>
                {{page.post_code}}
              
              <!-- Person 1 END -->
            </div>
            <div class="col-lg-6">
              <!-- Person 2 START -->     
              <a href="https://www.google.com/maps/dir/?api=1&destination={{page.page_name|urlencode}}+{{page.address1|urlencode}}+{{page.county|urlencode}}+{{page.post_code|urlencode}}" class="btn btn-primary btn-small">Get Directions</a>
              <!-- Person 2 END -->
            </div>
          </div>
        </div>
        <!-- Card body END -->
      </div>
      <!-- Card feed item END -->

      <!-- Card feed item START -->
      <div class="card">
        <!-- Card header START -->
        <div class="card-header d-sm-flex justify-content-between border-0 pb-0">
          <h5 class="card-title">Interests</h5>
          <a class="btn btn-primary-soft btn-sm" href="#!"> See all</a>
        </div>
        <!-- Card header END -->
        <!-- Card body START -->
        <div class="card-body">
          <div class="row g-4">
            <div class="col-sm-6 col-lg-4">
              <!-- Interests item START -->
              <div class="d-flex align-items-center position-relative">
                  <div class="avatar">
                    <img class="avatar-img" src="assets/images/logo/04.svg" alt="">
                  </div>
                  <div class="ms-2">
                    <h6 class="mb-0"> <a class="stretched-link" href="#"> Oracle </a></h6>
                    <p class="small mb-0">7,546,224 followers</p>
                  </div>
              </div>
              <!-- Interests item END -->
            </div>
            <div class="col-sm-6 col-lg-4">
              <!-- Interests item START -->
              <div class="d-flex align-items-center position-relative">
                  <div class="avatar">
                    <img class="avatar-img" src="assets/images/logo/13.svg" alt="">
                  </div>
                  <div class="ms-2">
                    <h6 class="mb-0"> <a class="stretched-link" href="#"> Apple </a></h6>
                    <p class="small mb-0">102B followers</p>
                  </div>
              </div>
              <!-- Interests item END -->
            </div>
            <div class="col-sm-6 col-lg-4">
              <!-- Interests item START -->
              <div class="d-flex align-items-center position-relative">
                  <div class="avatar">
                    <img class="avatar-img rounded-circle" src="assets/images/avatar/placeholder.jpg" alt="">
                  </div>
                  <div class="ms-2">
                    <h6 class="mb-0"> <a class="stretched-link" href="#"> Elon musk </a></h6>
                    <p class="small mb-0"> CEO and Product Architect of Tesla, Inc 41B followers</p>
                  </div>
              </div>
              <!-- Interests item END -->
            </div>
            <div class="col-sm-6 col-lg-4">
              <!-- Interests item START -->
              <div class="d-flex align-items-center position-relative">
                  <div class="avatar">
                    <img class="avatar-img" src="assets/images/events/04.jpg" alt="">
                  </div>
                  <div class="ms-2">
                    <h6 class="mb-0"> <a class="stretched-link" href="#"> The X Factor </a></h6>
                    <p class="small mb-0">9,654 followers</p>
                  </div>
              </div>
              <!-- Interests item END -->
            </div>
            <div class="col-sm-6 col-lg-4">
              <!-- Interests item START -->
              <div class="d-flex align-items-center position-relative">
                  <div class="avatar">
                    <img class="avatar-img rounded-circle" src="assets/images/logo/12.svg" alt="">
                  </div>
                  <div class="ms-2">
                    <h6 class="mb-0"> <a class="stretched-link" href="#"> Getbootstrap </a></h6>
                    <p class="small mb-0">8,457,224 followers</p>
                  </div>
              </div>
              <!-- Interests item END -->
            </div>
          </div>
        </div>
        <!-- Card body END -->
      </div>
      <!-- Card feed item END -->



{% endblock %}